EMAPP.factory("viewMask",["$timeout",function(n){var s=0,e=angular.element(document.body).append('<div class="view-mask"><div class="progress"><div class="progress-bar progress-bar-striped active" style="width:100%"></div></div></div>').children(".view-mask"),a=function(a,i,r){i?(s++,e.css({display:"block"})):(r?s=0:s--,0>=s&&e.css({display:"none"})),n(a||angular.noop)};return{open:function(){a(arguments[0],!0)},close:function(){var s,e;arguments[0]instanceof Function?(s=arguments[0],e=arguments[1]):(s=null,e=arguments[0]),n(function(){a(s,!1,e)},200)}}}]);