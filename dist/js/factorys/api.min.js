EMAPP.factory("$api",["$resource",function(a){return function(t){return angular.forEach(EMAPP.api,function(n,r){if(n instanceof Array){var o=n[0],i=n[1],u=n[2],c=n[3];o&&(this[r]=a(t(o,!0),i,angular.forEach(angular.extend({},u),function(a,n){a=a||{},a.url&&(a.url=t(a.url)),a.method=a.method||"POST",a.params=angular.extend(a.url?{}:{_api_action:n},a.params)}),c))}},EMAPP.api={}),EMAPP.api}(function(a,t){return(/(^http:\/\/)|(^https:\/\/)|(^\/)/.test(a)?a:location.protocol+"//"+location.host+"/api/"+a)+(t?"/:_api_action":"")})}]);