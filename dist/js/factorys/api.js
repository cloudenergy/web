EMAPP.factory("$api",["$resource",function(a){return function(t){return angular.forEach(EMAPP.api,function(r,o){if(r instanceof Array){var n=r[0],i=r[1],c=r[2],u=r[3];n&&(this[o]=a(t(n,!0),i,angular.forEach(c,function(a,r){a=a||{},a.url&&(a.url=t(a.url)),a.method=a.method||"POST",a.params=angular.extend(a.url?{}:{_api_action:r},a.params)}),u))}},EMAPP.api={}),EMAPP.api}(function(a,t){return(/(^http:\/\/)|(^https:\/\/)|(^\/)/.test(a)?a:location.protocol+"//"+location.host+(localStorage.testapi?"/testapi/":"/api/")+a)+(t?"/:_api_action":"")})}]);