EMAPP.factory("$api",["$resource",function(a){return function(t){return angular.forEach(EMAPP.api,function(r,n){if(r instanceof Array){var o=r[0],i=r[1],u=r[2],c=r[3];o&&(this[n]=a(t(o,!0),i,angular.forEach(u,function(a,r){a=a||{},a.url&&(a.url=t(a.url)),a.method=a.method||"POST",a.params=angular.extend(a.url?{}:{_api_action:r},a.params)}),c))}},EMAPP.api={}),EMAPP.api}(function(a,t){return(/(^http:\/\/)|(^https:\/\/)|(^\/)/.test(a)?a:location.protocol+"//"+location.host+"/api/"+a)+(t?"/:_api_action":"")})}]);