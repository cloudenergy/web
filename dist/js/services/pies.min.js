~function(){function e(e){return{chart:e.chart||{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,backgroundColor:e.backgroundColor||null},title:e.titleObj||{text:e.title||"",verticalAlign:e.titleVerticalAlign||"",align:e.titleAlign||"center",x:e.titleX||0,y:e.titleY||15,style:e.titleStyle||{color:"#333333",fontSize:"18px"},useHTML:!0},legend:e.legend||{},tooltip:e.tooltip||{pointFormat:"{series.name}: <b>{point.percentage:.2f}%</b>"},plotOptions:{pie:e.pie||{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:e.enableDataLabels&&!0,color:"#000000",connectorColor:"#000000",format:"<b>{point.name}</b>: {point.percentage:.1f} %"},innerSize:e.innerSize||0,showInLegend:void 0==e.legend?!1:e.legend}},series:e.series}}angular.extend(e.prototype,{title:function(){var e="",t=this.input;return t?(e+=t.user?t.user.name:"全部",e+="商户",e+=t.category?t.category.name:"全部",e+="传感器类型",e+="<br />下的所有传感器能耗对比"):e},data:function(){var e=this.input,t=[],n=0;return e&&e.data&&e.sensors?(_.each(e.data,function(n,o){var r=_.last(n),i=_.find(e.sensors,function(e){return e._id==o});t.push([i.title,parseFloat(r.value)])}),n=_.reduce(t,function(e,t){return e[1]+t[1]}),_.each(t,function(e){e[1]/=n,e[1]*=100}),t):t}}),EMAPP.register.factory("Pies",function(){return e})}();