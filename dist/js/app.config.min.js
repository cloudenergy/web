EMAPP.config(["$animateProvider","$controllerProvider","$compileProvider","$filterProvider","$injector","$provide","$httpProvider","$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,r,a,n,o,s,i,c,u){EMAPP.register={controller:t.register,directive:r.directive,filter:a.register,provider:o.provider,constant:o.constant,value:o.value,factory:o.factory,service:o.service},i.html5Mode(!0),s.interceptors.push(["$q","$location","SweetAlert","viewMask",function(e,t,r,a){var n=function(n){return a.close(),n.data&&(90000005===n.data.code?t.url("/dashboard/auth/logout").replace():n.data.message&&r[200===n.status?"success":"error"](n.data.message)),200===n.status?n:e.reject(n)};return{request:function(e){return a.open(),e.url&&/\/api\//i.test(e.url)&&e.method&&(delete(e.data||e.params||{})._api_action,e.url=decodeURIComponent(e.url)),e},requestError:function(t){return e.reject(t)},response:n,responseError:n}}]),o.service("lazyLoad",["$q","$timeout","viewMask",function(e,t,r){this.cache={},this.css=function(a){var n,o,s=this.cache,i=e.defer(),c=[],u=navigator.userAgent;return"boolean"==typeof arguments[1]?(n=arguments[2],o=arguments[1]):(n=arguments[1],o=arguments[2]),angular.forEach(a instanceof Array?a:[a],function(r,a,n){a=s[r]||e.defer(),c.push(a.promise),s[r]||(n=document.createElement("link"),n.rel="stylesheet",o?s[r]=a:n.className="lazyLoad-stylesheet",/(?:Android);?[\s\/]+([\d.]+)?/i.test(u)||/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/i.test(u)?!function i(e,r){if(/webkit/i.test(u))n.sheet&&(r=!0);else if(n.sheet)try{n.sheet.cssRules&&(r=!0)}catch(o){("SecurityError"===o.name||1e3===o.code)&&(r=!0)}r||e>=200?a.resolve():t(function(){i(e+1)},10)}(0):n[document.addEventListener?"onload":"onreadystatechange"]=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&a.resolve()},n.onerror=function(){a.reject(r)},n.setAttribute("charset","utf-8"),n.href=r,(document.head||document.getElementsByTagName("head")[0]).appendChild(n))}),r.open(),e.all(c).then(function(){(n||angular.noop)(),t(i.resolve),r.close()},function(){t(i.reject),r.close(),console.error("lazyLoad-css-error:",arguments[0])}),i.promise},this.js=function(a){var n=this.cache,o=e.defer(),s=[],i=[],c=arguments[1];return angular.forEach(a instanceof Array?a:[a],function(t,r){r=n[t]||e.defer(),s.push(r.promise),n[t]||(n[t]=r,i.push(t))}),function u(e,t,r){(r=i[e])&&(t=document.createElement("script"),t[document.addEventListener?"onload":"onreadystatechange"]=function(a,o){(o||!t.readyState||/loaded|complete/.test(t.readyState))&&(document.body.removeChild(t),n[r].resolve(),u(e+1))},t.onerror=function(){n[r].reject(r),u(e+1)},t.setAttribute("charset","utf-8"),t.src=r,document.body.appendChild(t))}(0),r.open(),e.all(s).then(function(){(c||angular.noop)(),t(o.resolve),r.close()},function(){t(o.reject),r.close(),console.error("lazyLoad-js-error:",arguments[0])}),o.promise}}]),o.provider("loadModules",function(){var s={},i=[],c={$animateProvider:e,$controllerProvider:t,$compileProvider:r,$filterProvider:a,$injector:n,$provide:o};this.$get=["$injector","$log",function(e,t){function r(e,t){angular.forEach(t,function(t,r){if(r=c[t[0]])if("invoke"!==t[1])r[t[1]].apply(r,t[2]);else{var a=function(a){-1===i.indexOf(e+"-"+a)&&(i.push(e+"-"+a),r[t[1]].apply(r,t[2]))};angular.isFunction(t[2][0])?a(t[2][0]):angular.isArray(t[2][0])&&angular.forEach(t[2][0],function(e){angular.isFunction(e)&&a(e)})}})}function a(e){var n,o=[];return angular.forEach(angular.isArray(e)?e:[e],function(e){if(e&&!s[e]){s[e]=!0;try{angular.isString(e)?(n=angular.module(e))&&(o=o.concat(a(n.requires)).concat(n._runBlocks),r(e,n._invokeQueue),r(e,n._configBlocks)):(angular.isFunction(e)||angular.isArray(e))&&o.push(e)}catch(i){throw angular.isArray(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),t.error("Failed to instantiate module "+e+" due to:\n"+(i.stack||i.message||i))}}}),o}return function(t){angular.forEach(a(t),function(t){e.invoke(t)})}}]}),o.factory("routerSetup",function(){return function(){angular.forEach(EMAPP.States,function(e,t){c.state(t,e)}),u.otherwise(function(e,t){t.url(EMAPP.User.token?"/dashboard":"/dashboard/auth/login").replace()})}}),o.service("$api",["$resource",function(e){var t=function(e,t){return(/(^http:\/\/)|(^https:\/\/)|(^\/)/.test(e)?e:location.protocol+"//"+location.host+"/api/"+e)+(t?"/:_api_action":"")};angular.forEach(EMAPP.api,function(r,a){if(r instanceof Array){var n=r[0],o=r[1],s=r[2],i=r[3];n&&(this[a]=e(t(n,!0),o,angular.forEach(angular.extend({get:{method:"GET"},list:{method:"GET"},search:{method:"GET"},set:{},create:{},update:{},remove:{},"delete":{}},s),function(e,r){e=e||{},e.url&&(e.url=t(e.url)),e.method=e.method||"POST",e.params=angular.extend(e.url?{}:{_api_action:r},e.params)}),i))}},this)}]),o.factory("SweetAlert",function(){return{swal:window.swal,success:function(e,t){this.swal(e,t,"success")},error:function(e,t){this.swal(e,t,"error")},warning:function(e,t){this.swal(e,t,"warning")},info:function(e,t){this.swal(e,t,"info")}}}),o.service("viewMask",["$timeout",function(e){var t=0,r=$('<div class="view-mask"><div class="progress"><div class="progress-bar progress-bar-striped active" style="width:100%"></div></div></div>').appendTo(document.body),a=function(a,n,o){n?(t++,r.show()):(o?t=0:t--,0>=t&&r.hide()),e(a||angular.noop)};r.hide(),this.open=function(){a(arguments[0],!0)},this.close=function(){var t,r;arguments[0]instanceof Function?(t=arguments[0],r=arguments[1]):(t=null,r=arguments[0]),e(function(){a(t,!1,r)},200)}}]),o.factory("uuid",function(){return function e(t,r){var a,n,e=[],o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");if(r=r||o.length,t)for(a=0;t>a;a++)e[a]=o[0|Math.random()*r];else for(e[8]=e[13]=e[18]=e[23]="-",e[14]="4",a=0;36>a;a++)e[a]||(n=0|16*Math.random(),e[a]=o[19==a?3&n|8:n]);return e.join("")}})}]),EMAPP.run(["$rootScope","$cookies","$templateCache","$state","routerSetup",function(e,t,r,a,n){a.prev={},e.$on("$stateChangeStart",function(e,t,r,n,o){EMAPP.lazyLoadStylesheet=$("link[class=lazyLoad-stylesheet]"),EMAPP.User.token?("dashboard"!==t.name&&"auth"!==t.name&&(a.prev.state=t.name,a.prev.params=r,EMAPP.Project||(e.preventDefault(),a.go("dashboard"))),EMAPP.Project&&"dashboard"===t.name&&(e.preventDefault(),a.go(a.prev.state||"dashboard.main",a.prev.params))):"auth"!==t.name&&(e.preventDefault(),a.go("auth",{action:"login"}))}),e.$on("$stateChangeSuccess",function(e,t,r,a,n){EMAPP.lazyLoadStylesheet&&EMAPP.lazyLoadStylesheet.remove(),function(e){t.data&&t.data.title&&e.push(t.data.title),EMAPP.title&&e.push(EMAPP.title),document.title=e.join(" - ")}([])}),EMAPP.templateCache=r,n(),angular.forEach(t.getAll(),function(e,t){this[t]=e},EMAPP.User={})}]);