EMAPP.config(["$animateProvider","$controllerProvider","$compileProvider","$filterProvider","$injector","$provide","$httpProvider","$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,r,n,a,o,s,i,c,u){EMAPP.register={controller:t.register,directive:r.directive,filter:n.register,provider:o.provider,constant:o.constant,value:o.value,factory:o.factory,service:o.service},i.html5Mode(!0),s.interceptors.push(["$q","$location","SweetAlert","viewMask",function(e,t,r,n){var a=function(a){return n.close(),a.data&&(90000005===a.data.code?t.url("/dashboard/auth/logout").replace():a.data.message&&r[200===a.status?"success":"error"](a.data.message)),200===a.status?a:e.reject(a)};return{request:function(e){return n.open(),e.url&&/\/api\//i.test(e.url)&&e.method&&(delete(e.data||e.params||{})._api_action,e.url=decodeURIComponent(e.url)),e},requestError:function(t){return e.reject(t)},response:a,responseError:a}}]),o.service("lazyLoad",["$q","$timeout","viewMask",function(e,t,r){this.cache={},this.css=function(n){var a,o,s=this.cache,i=e.defer(),c=[],u=navigator.userAgent;return"boolean"==typeof arguments[1]?(a=arguments[2],o=arguments[1]):(a=arguments[1],o=arguments[2]),angular.forEach(n instanceof Array?n:[n],function(r,n,a){n=s[r]||e.defer(),c.push(n.promise),s[r]||(a=document.createElement("link"),a.rel="stylesheet",o?s[r]=n:a.className="lazyLoad-stylesheet",/(?:Android);?[\s\/]+([\d.]+)?/i.test(u)||/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/i.test(u)?!function i(e,r){if(/webkit/i.test(u))a.sheet&&(r=!0);else if(a.sheet)try{a.sheet.cssRules&&(r=!0)}catch(o){("SecurityError"===o.name||1e3===o.code)&&(r=!0)}r||e>=200?n.resolve():t(function(){i(e+1)},10)}(0):a[document.addEventListener?"onload":"onreadystatechange"]=function(e,t){(t||!a.readyState||/loaded|complete/.test(a.readyState))&&n.resolve()},a.onerror=function(){n.reject(r)},a.setAttribute("charset","utf-8"),a.href=r,(document.head||document.getElementsByTagName("head")[0]).appendChild(a))}),r.open(),e.all(c).then(function(){(a||angular.noop)(),t(i.resolve),r.close()},function(){t(i.reject),r.close(),console.error("lazyLoad-css-error:",arguments[0])}),i.promise},this.js=function(n){var a=this.cache,o=e.defer(),s=[],i=[],c=arguments[1];return angular.forEach(n instanceof Array?n:[n],function(t,r){r=a[t]||e.defer(),s.push(r.promise),a[t]||(a[t]=r,i.push(t))}),function u(e,t,r){(r=i[e])&&(t=document.createElement("script"),t[document.addEventListener?"onload":"onreadystatechange"]=function(n,o){(o||!t.readyState||/loaded|complete/.test(t.readyState))&&(document.body.removeChild(t),a[r].resolve(),u(e+1))},t.onerror=function(){a[r].reject(r),u(e+1)},t.setAttribute("charset","utf-8"),t.src=r,document.body.appendChild(t))}(0),r.open(),e.all(s).then(function(){(c||angular.noop)(),t(o.resolve),r.close()},function(){t(o.reject),r.close(),console.error("lazyLoad-js-error:",arguments[0])}),o.promise}}]),o.provider("loadModules",function(){var s={},i=[],c={$animateProvider:e,$controllerProvider:t,$compileProvider:r,$filterProvider:n,$injector:a,$provide:o},u=function(e,t){angular.forEach(t,function(t,r){if(r=c[t[0]])if("invoke"!==t[1])r[t[1]].apply(r,t[2]);else{var n=function(n){-1===i.indexOf(e+"-"+n)&&(i.push(e+"-"+n),r[t[1]].apply(r,t[2]))};angular.isFunction(t[2][0])?n(t[2][0]):angular.isArray(t[2][0])&&angular.forEach(t[2][0],function(e){angular.isFunction(e)&&n(e)})}})},l=function(e){var t,r=[];return angular.forEach(angular.isArray(e)?e:[e],function(e){if(e&&!s[e]){s[e]=!0;try{angular.isString(e)?(t=angular.module(e))&&(r=r.concat(l(t.requires)).concat(t._runBlocks),u(e,t._invokeQueue),u(e,t._configBlocks)):(angular.isFunction(e)||angular.isArray(e))&&r.push(e)}catch(n){throw angular.isArray(e)&&(e=e[e.length-1]),n.message&&n.stack&&-1===n.stack.indexOf(n.message)&&(n=n.message+"\n"+n.stack),console.error("Failed to instantiate module "+e+" due to:\n"+(n.stack||n.message||n))}}}),r};this.$get=["$injector",function(e){return function(t){angular.forEach(l(t),function(t){e.invoke(t)})}}]}),o.factory("routerSetup",function(){return function(){angular.forEach(EMAPP.States,function(e,t){c.state(t,e)}),u.otherwise(function(e,t){t.url(EMAPP.User.token?"/dashboard":"/dashboard/auth/login").replace()})}}),o.service("$api",["$resource",function(e){var t=function(e,t){return(/(^http:\/\/)|(^https:\/\/)|(^\/)/.test(e)?e:location.protocol+"//"+location.host+"/api/"+e)+(t?"/:_api_action":"")};angular.forEach(EMAPP.api,function(r,n){if(r instanceof Array){var a=r[0],o=r[1],s=r[2],i=r[3];a&&(this[n]=e(t(a,!0),o,angular.forEach(angular.extend({get:{method:"GET"},list:{method:"GET"},search:{method:"GET"},set:{},create:{},update:{},remove:{},"delete":{}},s),function(e,r){e=e||{},e.url&&(e.url=t(e.url)),e.method=e.method||"POST",e.params=angular.extend(e.url?{}:{_api_action:r},e.params)}),i))}},this)}]),o.factory("SweetAlert",function(){return{swal:window.swal,success:function(e,t){this.swal(e,t,"success")},error:function(e,t){this.swal(e,t,"error")},warning:function(e,t){this.swal(e,t,"warning")},info:function(e,t){this.swal(e,t,"info")}}}),o.service("viewMask",["$timeout",function(e){var t=0,r=$('<div class="view-mask"><div class="progress"><div class="progress-bar progress-bar-striped active" style="width:100%"></div></div></div>').appendTo(document.body),n=function(n,a,o){a?(t++,r.show()):(o?t=0:t--,0>=t&&r.hide()),e(n||angular.noop)};r.hide(),this.open=function(){n(arguments[0],!0)},this.close=function(){var t,r;arguments[0]instanceof Function?(t=arguments[0],r=arguments[1]):(t=null,r=arguments[0]),e(function(){n(t,!1,r)},200)}}]),o.factory("uuid",function(){return function e(t,r){var n,a,e=[],o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");if(r=r||o.length,t)for(n=0;t>n;n++)e[n]=o[0|Math.random()*r];else for(e[8]=e[13]=e[18]=e[23]="-",e[14]="4",n=0;36>n;n++)e[n]||(a=0|16*Math.random(),e[n]=o[19==n?3&a|8:a]);return e.join("")}})}]),EMAPP.run(["$rootScope","$cookies","$templateCache","$state","routerSetup",function(e,t,r,n,a){n.prev={},e.$on("$stateChangeStart",function(e,t,r,a,o){EMAPP.lazyLoadStylesheet=$("link[class=lazyLoad-stylesheet]"),EMAPP.User.token?("dashboard"!==t.name&&"auth"!==t.name&&(n.prev.state=t.name,n.prev.params=r,EMAPP.Project||(e.preventDefault(),n.go("dashboard",r))),EMAPP.Project&&"dashboard"===t.name&&(e.preventDefault(),n.go(n.prev.state||"dashboard.main",n.prev.params))):"auth"!==t.name&&(e.preventDefault(),n.go("auth",angular.extend(r,{action:"login"})))}),e.$on("$stateChangeSuccess",function(e,t,r,n,a){EMAPP.lazyLoadStylesheet&&EMAPP.lazyLoadStylesheet.remove(),function(e){t.data&&t.data.title&&e.push(t.data.title),EMAPP.title&&e.push(EMAPP.title),document.title=e.join(" - ")}([])}),EMAPP.templateCache=r,a(),angular.forEach(t.getAll(),function(e,t){this[t]=e},EMAPP.User={})}]);