EMAPP.templateCache.put("dist/html/project/control.html?rev=fcb110ed4c",'<div class="app-view-project-control text-center ng-cloak"><div class="nav nav-tabs"><div class="btn-group"><a href="javascript:void(0)" class="btn btn-sm btn-primary" ng-class="{active:self.deviceType.selected.id===item.id}" ng-repeat="item in self.deviceType" ng-click="self.deviceType.select(item)" ng-bind="item.name"></a></div></div><div class="tab-content row"><div class="tab-pane active" ng-class="{true:\'col-xs-10\',false:\'col-xs-12\'}[!!self.showCustomer]"><div slimscroll><table class="table table-hover table-bordered" ng-repeat="(key,list) in self.monitorData"><tr ng-if="key===\'ENERGYMETER\'"><th style="width:15%">ä¼ æ„Ÿå™¨</th><th style="width:100px">å¼€å…³</th><th style="width:87px">ä¾›æ°´æ¸©åº¦</th><th style="width:87px">å›æ°´æ¸©åº¦</th><th style="width:87px">æ¸©å·®</th><th>æµé‡</th><th>æµé€Ÿ</th><th>æ€»å†·é‡</th><th>æ€»çƒ­é‡</th></tr><tr ng-if="key===\'ENERGYMETER\'" ng-repeat="item in list"><td ng-bind="item.title"></td><td class="bootstrap-switch-square"><input type="checkbox" control-switch data-on-color="info" data-on-text="åˆ¶å†·" data-on-value="EMC_COOLING" data-off-color="danger" data-off-text="åˆ¶çƒ­" data-off-value="EMC_HEATING" data-command="{{(item.command|filter:\'EMC_MODE\').join()}}" data-sensorid="{{item.id}}" ng-checked="item.status.mode===\'EMC_COOLING\'"></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels[\'05\'].lasttotal"></span> <span class="form-control-feedback"><i class="em em-degree"></i></span></div></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels[\'06\'].lasttotal"></span> <span class="form-control-feedback"><i class="em em-degree"></i></span></div></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="(item.channels[\'05\'].lasttotal>item.channels[\'06\'].lasttotal?item.channels[\'05\'].lasttotal-item.channels[\'06\'].lasttotal:item.channels[\'06\'].lasttotal-item.channels[\'05\'].lasttotal).toFixed(2)"></span> <span class="form-control-feedback"><i class="em em-degree"></i></span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels[\'04\'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels[\'09\'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels[\'07\'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels[\'08\'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr><tr ng-if="key===\'COLDWATERMETER\'"><th style="width:25%">ä¼ æ„Ÿå™¨</th><th style="width:100px">å¼€å…³</th><th style="text-align:left">åˆ»åº¦</th></tr><tr ng-if="key===\'COLDWATERMETER\'" ng-repeat="item in list"><td ng-bind="item.title"></td><td class="bootstrap-switch-square"><input type="checkbox" control-switch data-on-color="primary" data-on-text="å¼€" data-on-value="EMC_ON" data-off-text="å…³" data-off-value="EMC_OFF" data-command="{{(item.command|filter:\'EMC_SWITCH\').join()}}" data-sensorid="{{item.id}}" ng-checked="item.status.switch===\'EMC_ON\'"></td><td style="text-align:left"><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels[\'01\'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr><tr ng-if="key===\'HOTWATERMETER\'"><th style="width:25%">ä¼ æ„Ÿå™¨</th><th style="width:100px">å¼€å…³</th><th style="text-align:left">åˆ»åº¦</th></tr><tr ng-if="key===\'HOTWATERMETER\'" ng-repeat="item in list"><td ng-bind="item.title"></td><td class="bootstrap-switch-square"><input type="checkbox" control-switch data-on-color="primary" data-on-text="å¼€" data-on-value="EMC_ON" data-off-text="å…³" data-off-value="EMC_OFF" data-command="{{(item.command|filter:\'EMC_SWITCH\').join()}}" data-sensorid="{{item.id}}" ng-checked="item.status.switch===\'EMC_ON\'"></td><td style="text-align:left"><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels[\'03\'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr><tr ng-if="key===\'ELECTRICITYMETER\'"><th style="width:25%">ä¼ æ„Ÿå™¨</th><th style="width:100px">å¼€å…³</th><th style="text-align:left">åŠŸç‡</th></tr><tr ng-if="key===\'ELECTRICITYMETER\'" ng-repeat="item in list"><td ng-bind="item.title"></td><td class="bootstrap-switch-square"><input type="checkbox" control-switch data-on-color="primary" data-on-text="å¼€" data-on-value="EMC_ON" data-off-text="å…³" data-off-value="EMC_OFF" data-command="{{(item.command|filter:\'EMC_SWITCH\').join()}}" data-sensorid="{{item.id}}" ng-checked="item.status.switch===\'EMC_ON\'"></td><td style="text-align:left"><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels[\'11\'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr><tr ng-if="key===\'TEMPRATURECONTROL\'"><th style="width:15%">æ¸©æ§å™¨å</th><th style="width:100px">å¼€å…³</th><th>è®¾ç½®æ¸©åº¦</th><th style="width:87px">å½“å‰æ¸©åº¦</th><th>èƒ½é‡å€¼(åº¦)</th><th style="min-width:130px">é£é€Ÿ</th><th style="min-width:270px">æ¨¡å¼</th></tr><tr ng-if="key===\'TEMPRATURECONTROL\'" ng-repeat="item in list"><td ng-bind="item.title"></td><td class="bootstrap-switch-square"><input type="checkbox" control-switch data-on-color="primary" data-on-text="å¼€" data-on-value="EMC_ON" data-off-text="å…³" data-off-value="EMC_OFF" data-command="{{(item.command|filter:\'EMC_SWITCH\').join()}}" data-sensorid="{{item.id}}" ng-checked="item.status.switch===\'EMC_ON\'"></td><td><div control-slider data-max="15" data-command="{{(item.command|filter:\'EMC_TEMPRATURE\').join()}}" data-sensorid="{{item.id}}" data-value="{{item.channels[\'37\'].lasttotal}}"></div></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels[\'40\'].lasttotal"></span> <span class="form-control-feedback"><i class="em em-degree"></i></span></div></td><td><div class="input-group input-group-sm focus"><span class="input-group-addon"><i class="em em-charging"></i></span> <span class="form-control" ng-bind="item.channels[\'33\'].lasttotal"></span></div></td><td><div control-speed data-command="{{(item.command|filter:\'EMC_WINDSPEED\').join()}}" data-sensorid="{{item.id}}" data-status="{{item.status.mode}}"></div></td><td><div class="btn-group" control-mode data-command="{{(item.command|filter:\'EMC_MODE\').join()}}" data-sensorid="{{item.id}}" data-status="{{item.status.mode}}"></div></td></tr></table></div></div><div class="tab-pane col-xs-2 text-left" ng-class="{active:self.showCustomer}" style="padding-left:0"><input type="text" class="form-control input-sm" placeholder="ğŸ”å…³é”®å­—æœç´¢" ng-model="self.jstreeSearch"><div auto-height jstree="self.jstree" jstree-search="self.jstreeSearch" style="overflow:auto"></div></div></div></div>'),EMAPP.register.controller("project.control",["$api","$timeout","$stateParams",function(e,t,i){var l=this,c=EMAPP.Project.current&&EMAPP.Project.current._id,o=function(){$(".slimScrollDiv,div[slimscroll]").height($(window).height()-$("div[slimscroll]").offset().top-15)};return $(window).resize(o),o(),c&&e.device.type({project:c},function(e){l.deviceType=e.result,l.deviceType.length&&(l.deviceType.select=function(e){l.deviceType.selected=e,l.monitorData=[],$("div[slimscroll]").slimScroll&&$("div[slimscroll]").slimScroll({scrollBy:0,scrollTo:0}),$("div.slimScrollBar").css({top:0}),l.list()})(l.deviceType[0])}),l.list=function(i){l.monitorData.loading=!0,e.business.monitor(angular.extend({devicetype:l.deviceType.selected.id,project:c,ext:{enableMask:1},groupby:"SENSOR",pageindex:1,pagesize:1e4},angular.isObject(i)?i:angular.isNumber(i)?{pageindex:i}:{}),function(e){e=e.result[c]||{},angular.forEach(e.detail,function(e){e.devicetype&&(this[e.devicetype]=this[e.devicetype]||[],this[e.devicetype].push(e))},l.monitorData={}),t(o)})},l}]);