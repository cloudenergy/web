EMAPP.templateCache.put("dist/html/dashboard.min.html?rev=a4db072ff5",'<div class="app-view-dashboard"><nav class="navbar navbar-default"><div class="col-sm-4" ng-bind="::self.projectName"></div><div class="col-sm-4 text-center"><i class="em em-clock"></i> <span ng-bind="self.timeStr"></span></div><div class="col-sm-4 text-right"><a href="http://sighttp.qq.com/authd?IDKEY=c7520bcf5154b71353e5f9bbcc742e8f37dab53dc23d63c5" target="_blank"><i class="em em-QQ"></i> <span><small>QQ客服</small></span></a> <a ng-href="{{::self.adminLink}}"><i class="em em-user"></i> <span ng-bind="::self.userName"></span></a> <a href="/dashboard/auth/logout"><span>退出</span> <i class="em em-exit"></i></a></div></nav><div class="view-sidebar"><ul class="nav"><li ng-repeat="item in self.menuData" ng-class="{active:self.menuData.active===item.state}"><a ui-sref="{{::item.state}}" title="{{::item.name}}"><i ng-class="::item.icon"></i></a></li></ul></div><div class="view-content" ui-view="dashboard"></div></div>'),EMAPP.register.controller("EMAPP.dashboard",["$scope","$state","$timeout","$filter","$api","$q",function(e,t,a,n,o,r){var i=this,m=a(function s(){i.timeStr=n("date")(new Date,"H:mm:ss"),m=a(s,1e3)});return i.userName=EMAPP.User.user,i.adminLink=/cloudenergy\.me/.test(location.hostname)?"http://admin.cloudenergy.me":"/admin",r.all([angular.isUndefined(EMAPP.User.groupuser)&&o.auth.login(function(e){EMAPP.User=e&&e.result||EMAPP.User||{}}).$promise,o.project.info(function(e){angular.forEach(EMAPP.Project=e&&e.result||[],function(e){this.push(e._id),EMAPP.Project[e._id]=e},EMAPP.Project.ids=[])}).$promise]).then(function(){EMAPP.User.groupuser?(document.title=EMAPP.title=i.projectName="集团平台",i.menuData=[{state:"dashboard.main",name:"首页",icon:"em em-home"},{state:"dashboard.monitor",name:"监控",icon:"em em-camera"},{state:"dashboard.analyze",name:"分析",icon:"em em-analyze"},{state:"dashboard.statistic",name:"统计",icon:"em em-pie-chart"}]):(EMAPP.Project.current=EMAPP.Project[0]||{},document.title=EMAPP.title=i.projectName=EMAPP.Project.current.title||i.projectName,i.menuData=[{state:"dashboard.main",name:"首页",icon:"em em-home"},{state:"dashboard.monitor",name:"监控",icon:"em em-camera"},{state:"dashboard.control",name:"控制",icon:"em em-control"},{state:"dashboard.analyze",name:"分析",icon:"em em-analyze"},{state:"dashboard.statistic",name:"统计",icon:"em em-pie-chart"},{state:"dashboard.financial",name:"财务",icon:"em em-financial"}]),e.$on("$stateChangeSuccess",function(e,t,a,n,o){$(window).unbind("resize"),i.menuData.active=t.name}),e.$on("$destroy",function(){delete EMAPP.Project,a.cancel(m),$(window).unbind("resize")}),EMAPP.User.token?(t.prev.exist=!1,angular.forEach(i.menuData,function(e){t.prev.state===e.state&&(t.prev.exist=!0)}),t.go(t.prev.exist&&t.prev.state||"dashboard.main",t.prev.params)):t.go("auth",{action:"login"})}),i}]);