window.EMAPP=angular.module("EMAPP",["ngCookies","ngResource","ui.router","oc.lazyLoad"]).config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,r,o,i){EMAPP.register={controller:e.register,directive:r.directive,filter:o.register,provider:i.provider,constant:i.constant,value:i.value,factory:i.factory,service:i.service}}]).run(["$templateCache",function(e){EMAPP.templateCache=e}]),angular.element(document).ready(function(){angular.element(document.body).html('<div preloader class="preloader" ng-show="preloader"></div><div ui-view></div>'),angular.bootstrap(document,["EMAPP"])});
EMAPP.config(["$provide",function(e){var t={auth:["auth",,{login:{},logout:{}}],project:["project",,{info:{}}],business:["business",,{calendar:{cache:!0},dailycost:{},monthlykgce:{},energyconstitute:{},dailysensordetail:{},energyeffectiverate:{},projectdetail:{},monitor:{},channeldetail:{},buildingstatistic:{},energyincomerate:{},energytimeline:{},socitystatistic:{},socitydetail:{},socitytimeline:{},groupanalysis:{},settlereport:{},monthlyreport:{},dailyreport:{},projectreport:{},recentchargelog:{},departments:{},departmentusage:{}}],energy:["energy",,{info:{cache:!0}}],control:["control",,{send:{}}],device:["device",,{type:{cache:!0}}],message:["message",,{arreargereminder:{}}],customer:["customer",,{info:{}}]};e.service("$api",["$rootScope","$resource","$state",function(e,a,r){function n(e,t){return/(^http:\/\/)|(^https:\/\/)/.test(e)&&e||[localStorage.testapi&&"/testapi/"||"/api/",e,t&&"/:_api_action"||""].join("")}r._api_request=[],e.$watch(function(){return r.current.name},function(e){angular.forEach(r._api_request,function(t){t.state===e&&this.push(t)||t.request.$cancelRequest()},r._api_request=[])}),angular.forEach(t,function(e,t){angular.isArray(e)&&e[0]&&(e[0]=n(e[0],!!e[2]),e[3]=angular.extend({},{cancellable:!0},e[3]),angular.forEach(e[2],function(e,t){angular.extend(e,{url:e.url&&n(e.url)||void 0,method:e.method||"POST",params:angular.extend(e.url&&{}||{_api_action:t},e.params)})}),angular.forEach(this[t]=a.apply(a,e),function(e,t,a){this[t]=function(){return a=e.apply(e,arguments),a.$cancelRequest&&r._api_request.push({state:r.current.name,request:a}),a}},this[t]))},this)}])}]);
EMAPP.factory("SweetAlert",function(){return{swal:function(){return(window.swal||angular.noop).apply(window.swal||this,arguments)},success:function(n,r){return this.swal(n,r,"success")},error:function(n,r){return this.swal(n,r,"error")},warning:function(n,r){return this.swal(n,r,"warning")},info:function(n,r){return this.swal(n,r,"info")}}});
"use strict";!function(e,t){EMAPP.config(["$httpProvider",function(t){t.interceptors.push(["$q","$location","SweetAlert",function(t,r,n){var o=function(o){return e--,o.data&&(90000005===o.data.code?r.url("/dashboard/auth/logout").replace():o.data.message&&n[200===o.status?"success":"error"](o.data.message)),200===o.status?o:t.reject(o)};return{request:function(t){return t.url&&/\/api\//i.test(t.url)&&t.method&&(delete(t.data||t.params||{})._api_action,t.url=decodeURIComponent(t.url)),e++,t},requestError:function(e){return t.reject(e)},response:o,responseError:o}}])}]).directive("preloader",["$timeout",function(r){return{restrict:"A",scope:!0,link:function(n){n.$watch(function(){return e},function(e){t&&r.cancel(t),0===e?t=r(function(){n.preloader=e},500):n.preloader=e})}}}])}(0);