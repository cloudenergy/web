EMAPP.register.directive("datetimepicker",["$parse","$q","$timeout","lazyLoad",function($parse,$q,$timeout,lazyLoad){return{restrict:"EA",require:"?ngModel",link:function(scope,element,attrs,ctrl){var data={locale:"zh-CN",format:"YYYY-MM-DD",maxDate:new Date,widgetPositioning:{horizontal:"right"}},defer=$q.defer(),promise=[lazyLoad.css("/vendor/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css?rev=74c5af5cfe",!0),lazyLoad.js(["/vendor/moment/min/moment-with-locales.min.js?rev=8921196249","/vendor/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js?rev=ca3e24059b"])];angular.forEach(element.data(),function(val,key){/^\$/.test(key)||(/^\{.*\}$/.test(val)||/^\[.*\]$/.test(val)?eval("this[key]="+val):this[key]=val)},data),attrs.datetimepicker&&(promise.push(defer.promise),scope.$watch(attrs.datetimepicker,function(e){e&&(angular.extend(data,e),defer.resolve())})),$q.all(promise).then(function(e){e=element.is("input"),element.datetimepicker(data),!data.inline&&element.on("dp.change",function(e){ctrl&&ctrl.$setViewValue(e.target.value)}).on("dp.show",function(){e?element.parent().addClass("focus"):element.addClass("focus")}).on("dp.hide",function(){e?element.parent().removeClass("focus"):element.removeClass("focus")})})}}}]);