angular.module("EMAPP").directive("controlSlider",["$api","$timeout",function(e,n){return{restrict:"A",scope:{},template:function(){return['<div class="ui-slider"></div>','<div class="text-left" style="min-width:200px;line-height:24px;">','<span class="text-muted">范围：16 ~ 30<i class="emweb web-degree"></i></span>&nbsp;&nbsp;','<span class="text-primary">设定：{{value+15}}<i class="emweb web-degree"></i></span>',"</div>"].join("")},link:function(t,a,i,c){angular.isDefined(i.command)&&t.$watch(i.command,function(){var c=angular.extend({min:1,max:10,value:5,orientation:"horizontal",range:"min",change:function(n,t){c.value!==t.value&&(c.value=t.value,e.control.send({id:i.sensorid,command:i.command,param:{value:t.value+15}}))},slide:function(e,a){n(function(){t.value=a.value})}},a.data());c.value>c.max&&(c.value=Math.ceil(c.value%c.max)),t.value=c.value,a.children(".ui-slider").slider(c)})}}}]),angular.module("EMAPP").directive("controlMode",["$api",function(e){return{restrict:"A",scope:{},template:function(){return['<a href="javascript:void(0)" class="btn btn-sm btn-primary" ng-class="{active:current===1}" ng-click="mode(1)"><i class="emweb web-snow"></i>制冷</a>','<a href="javascript:void(0)" class="btn btn-sm btn-primary" ng-class="{active:current===2}" ng-click="mode(2)"><i class="emweb web-sun"></i>制热</a>','<a href="javascript:void(0)" class="btn btn-sm btn-primary" ng-class="{active:current===3}" ng-click="mode(3)"><i class="emweb web-clear-wet"></i>除湿</a>','<a href="javascript:void(0)" class="btn btn-sm btn-primary" ng-class="{active:current===4}" ng-click="mode(4)"><i class="emweb web-ventilation"></i>通风</a>'].join("")},link:function(n,t,a,i){angular.isUndefined(a.command)||n.$watch(a.command,function(){n.current={EMC_COOLING:1,EMC_HEATING:2,EMC_DEHUMIDIFYING:3,EMC_VERTILATING:4}[a.status]||0,n.mode=function(t){n.current=t,e.control.send({id:a.sensorid,command:a.command,param:{mode:{1:"EMC_COOLING",2:"EMC_HEATING",3:"EMC_DEHUMIDIFYING",4:"EMC_VERTILATING"}[t]}})}})}}}]),angular.module("EMAPP").directive("controlSpeed",["$api",function(e){return{restrict:"A",scope:{},template:function(){return['<i class="emweb web-speed-three" ng-class="{active:current===1}" ng-click="speed(1)"></i>','<i class="emweb web-speed-four" ng-class="{active:current===2}" ng-click="speed(2)"></i>','<i class="emweb web-speed-five" ng-class="{active:current===3}" ng-click="speed(3)"></i>'].join("")},link:function(n,t,a,i){angular.isUndefined(a.command)||n.$watch(a.command,function(){n.current={EMC_LOW:1,EMC_MEDIUM:2,EMC_HIGH:3}[a.status]||0,n.speed=function(t){n.current=t,e.control.send({id:a.sensorid,command:a.command,param:{mode:{1:"EMC_LOW",2:"EMC_MEDIUM",3:"EMC_HIGH"}[t]}})}})}}}]),angular.module("EMAPP").directive("controlSwitch",["$q","$api","$timeout","SweetAlert",function(e,n,t,a){return{restrict:"A",link:function(i,c,o,r){angular.isUndefined(o.ngChecked)?c.bootstrapSwitch():(c.bootstrapSwitch("disabled",!0),i.$watch(o.ngChecked,function(i){t(function(r){r=!0,o.command&&c.bootstrapSwitch("disabled",!1).bootstrapSwitch("state",i).on("switchChange.bootstrapSwitch",function(i,s){t(function(){/^(EMC_SWITCH)$/.test(o.command)?r&&a.swal({title:"控制校验",input:"password",cancelButtonText:"取消",confirmButtonText:"确定",inputPlaceholder:"控制密码",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:!1,preConfirm:function(t){var a=e.defer();return t?n.control.send({id:o.sensorid,command:o.command,param:{mode:s?o.onValue:o.offValue},ctrlcode:(new Hashes.SHA1).hex(t).toUpperCase()},function(e){e.code?a.reject("密码校验未通过"):a.resolve(e)}):a.reject("请输入控制密码"),a.promise}}).then(function(e){a.close()},function(e){r=!1,c.bootstrapSwitch("toggleState"),t(function(){r=!0})}):n.control.send({id:o.sensorid,command:o.command,param:{mode:s?o.onValue:o.offValue}})})})})}))}}}]);
//# sourceMappingURL=control.min.js.map
