angular.module("EMAPP").directive("datetimepicker",["$ocLazyLoad",function($ocLazyLoad){var pluginLoad=$ocLazyLoad.load([{insertBefore:"#load_styles_before",files:["https://static.cloudenergy.me/libs/eonasdan-bootstrap-datetimepicker-4.17.37/build/css/bootstrap-datetimepicker.min.css"]},{files:["https://static.cloudenergy.me/libs/eonasdan-bootstrap-datetimepicker-4.17.37/build/js/bootstrap-datetimepicker.min.js"]}]);return{restrict:"EA",require:"?ngModel",link:function(scope,element,attrs,ctrl){pluginLoad.then(function(){var elmData,opt={maxDateTo:void 0,minDateTo:void 0,maxRangeTo:void 0,minRangeTo:void 0,rangeDay:void 0},options={locale:"zh-CN",format:"YYYY-MM-DD",maxDate:new Date,widgetPositioning:{horizontal:"right"}},linkage=function(e){opt.completed||(elmData=element.data("DateTimePicker"),opt.maxDateTo=opt.maxDateTo&&$(opt.maxDateTo).data("DateTimePicker"),opt.minDateTo=opt.minDateTo&&$(opt.minDateTo).data("DateTimePicker"),opt.maxRangeTo=opt.maxRangeTo&&$(opt.maxRangeTo).data("DateTimePicker"),opt.minRangeTo=opt.minRangeTo&&$(opt.minRangeTo).data("DateTimePicker"),opt.completed=!0),e=e||elmData.date(),opt.maxDateTo&&(opt.maxDateTo.minDate(e),opt.maxDateTo.date()&&elmData.maxDate(opt.maxDateTo.date())),opt.minDateTo&&(opt.minDateTo.maxDate(e),opt.minDateTo.date()&&elmData.minDate(opt.minDateTo.date())),opt.maxRangeTo&&opt.rangeDay&&opt.maxRangeTo.date(moment(Math.max(elmData.date(),Math.min(moment(e).add(opt.rangeDay,"days"),opt.maxRangeTo.date(),moment())))),opt.minRangeTo&&opt.rangeDay&&opt.minRangeTo.date(moment(Math.min(elmData.date(),Math.max(moment(e).subtract(opt.rangeDay,"days"),opt.minRangeTo.date()))))};angular.forEach(element.data(),function(val,key){/^\$/.test(key)||(/^\{.*\}$/.test(val)||/^\[.*\]$/.test(val)?eval("this[key]="+val):this[key]=val)},options),scope.$watch(attrs.datetimepicker,function(e){attrs.datetimepicker&&!angular.isDefined(e)||(angular.isObject(e)&&angular.extend(options,e),angular.forEach(opt,function(e,t){opt[t]=options[t],delete options[t]}),element.datetimepicker(options),!options.inline&&element.off("dp.change").on("dp.change",function(e){linkage(e.date),ctrl&&ctrl.$setViewValue(e.target.value)}).off("dp.show").on("dp.show",function(){linkage(),(element.is("input")?element.parent():element).addClass("focus")}).off("dp.hide").on("dp.hide",function(){(element.is("input")?element.parent():element).removeClass("focus")}))})})}}}]);
//# sourceMappingURL=datetimepicker.min.js.map
