angular.module("EMAPP").directive("datetimepicker",["$timeout","$ocLazyLoad",function($timeout,$ocLazyLoad){var pluginLoad=$ocLazyLoad.load([{insertBefore:"#load_styles_before",files:["https://static.cloudenergy.me/libs/eonasdan-bootstrap-datetimepicker-4.17.37/build/css/bootstrap-datetimepicker.min.css"]},{serie:!0,files:["https://static.cloudenergy.me/libs/moment-2.14.1/min/moment.min.js","https://static.cloudenergy.me/libs/moment-2.14.1/locale/zh-cn.js","https://static.cloudenergy.me/libs/eonasdan-bootstrap-datetimepicker-4.17.37/build/js/bootstrap-datetimepicker.min.js"]}]);return{restrict:"EA",require:"?ngModel",link:function(scope,element,attrs,ctrl){pluginLoad.then(function(){var linkLeft,linkRight,options={locale:"zh-CN",format:"YYYY-MM-DD",maxDate:new Date,widgetPositioning:{horizontal:"right"}};angular.forEach(element.data(),function(val,key){/^\$/.test(key)||(/^\{.*\}$/.test(val)||/^\[.*\]$/.test(val)?eval("this[key]="+val):this[key]=val)},options),scope.$watch(attrs.datetimepicker,function(e){attrs.datetimepicker&&!angular.isDefined(e)||(angular.isObject(e)&&angular.extend(options,e),linkLeft=options.linkLeft&&$(options.linkLeft),linkRight=options.linkRight&&$(options.linkRight),delete options.linkLeft,delete options.linkRight,element.datetimepicker(options),!options.inline&&$timeout(function(){var e=linkLeft&&linkLeft.length&&linkLeft.data("DateTimePicker"),t=linkRight&&linkRight.length&&linkRight.data("DateTimePicker"),a=element.data("DateTimePicker"),i=function(i,n){e&&(e.maxDate(i),e.date()&&a.minDate(e.date()),n&&e.date(moment(Math.max(moment(i).subtract(n,"days"),e.date())))),t&&(t.minDate(i),t.date()&&a.maxDate(t.date()),n&&t.date(moment(Math.min(moment(i).add(n,"days"),t.date(),moment()))))};element.off("dp.change").on("dp.change",function(e){ctrl&&ctrl.$setViewValue(e.target.value),i(e.date,attrs.rangeDay&&scope.$eval(attrs.rangeDay))}).off("dp.show").on("dp.show",function(e){(element.is("input")?element.parent():element).addClass("focus"),i(a.date(),attrs.rangeDay&&scope.$eval(attrs.rangeDay))}).off("dp.hide").on("dp.hide",function(){(element.is("input")?element.parent():element).removeClass("focus")})}))})})}}}]);
//# sourceMappingURL=datetimepicker.min.js.map
