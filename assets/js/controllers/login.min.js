EMAPP.templateCache.put("assets/html/login.html?rev=f86da396e5",'<div class="login-container"><div class="login-position text-center"><form class="login-form" ng-submit="self.login()" novalidate><div class="form-group"><img ng-src="assets/img/logo.png" title="智慧云能源用户平台" ng-if="!self.isBasic"> <img src="assets/img/logo_basic.png" title="柏诚智能云能源用户平台" ng-if="self.isBasic"></div><div class="form-group has-feedback"><input type="text" class="form-control login-field" ng-model="self.user" maxlength="50" placeholder="用户名"> <i class="form-control-feedback emweb web-card"></i></div><div class="form-group has-feedback"><input type="password" class="form-control login-field" ng-model="self.passwd" maxlength="18" placeholder="密码"> <i class="form-control-feedback emweb web-key"></i></div><div class="input-group show"><label class="checkbox pull-left" for="remember" role="button"><input type="checkbox" id="remember" checked="checked" ng-model="self.remember" data-toggle="checkbox"> 保存一个月</label><button type="submit" class="btn btn-primary pull-right">登录 <i class="emweb web-login"></i></button></div></form></div></div>'),angular.module("EMAPP").controller("EMAPP.login",["$state","$stateParams","$api","$cookies","md5","SweetAlert",function(e,o,t,a,r,n){$(":checkbox").radiocheck();var s,i=this,u=o.action||"logout",c=/cloudenergy\.me/.test(location.hostname)?".cloudenergy.me":location.hostname,l=function(o){!function(e,o){e&&angular.forEach(EMAPP.ErrorCode,function(t,a){parseInt(e)===parseInt(a)&&(o=t)}),o&&n.error.apply(n,angular.isArray(o)?o:[o])}(o.code||o.err,o.message),EMAPP.User=o&&o.result||EMAPP.User||{},angular.forEach(["token","user"],function(e){EMAPP.User[e]&&a.put(e,EMAPP.User[e]||!1,{path:"/",domain:c,expires:s&&moment().add(1,"months")._d||void 0})}),EMAPP.User.token?e.go(e.prev.state||"dashboard.main",EMAPP.User.groupuser&&e.prev.params||{}):e.go("auth",{action:"login"})};delete sessionStorage.projectid,i.isBasic=/^basic\./.test(location.host),i.login=function(){var e=this&&this.user,o=this&&this.passwd,a=[];s=i.remember,!e&&a.push("帐号"),!o&&a.push("密码"),a=a.join("与"),a&&n.warning("请输入您的"+a),!a&&t.auth.login({user:e,passwd:r.createHash(o).toUpperCase()},l,function(e){l(e.data)})},i.logout=function(){t.auth.logout({redirect:"/"},function(){EMAPP.User={},angular.forEach(["token","user"],function(e){a.remove(e,{path:"/"}),a.remove(e,{path:"/",domain:c}),a.remove(e,{path:"/",domain:".www"+c})}),e.go("auth",{action:"login"})})},"logout"===u&&i.logout()}]);
//# sourceMappingURL=login.min.js.map
