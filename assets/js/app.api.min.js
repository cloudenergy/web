angular.module("EMAPP").constant("APICONFIG",{auth:["auth",,{login:{},logout:{}}],project:["project",,{info:{}}],business:["business",,{calendar:{cache:!0},dailycost:{},monthlykgce:{},energyconstitute:{},dailysensordetail:{},energyeffectiverate:{},projectdetail:{},monitor:{},channeldetail:{},buildingstatistic:{},energyincomerate:{},energytimeline:{},socitystatistic:{},socitydetail:{},socitytimeline:{},groupanalysis:{},settlereport:{},monthlyreport:{},dailyreport:{},projectreport:{},recentchargelog:{},departments:{},departmentusage:{}}],energy:["energy",,{info:{cache:!0}}],control:["control",,{send:{},through:{}}],device:["device",,{type:{cache:!0}}],message:["message",,{remindrecharge:{}}],customer:["customer",,{info:{}}]}).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","$location","SweetAlert",function(e,t,a,r){function n(n){return e._request_count--,n.data&&(90000005===n.data.code?a.url("/dashboard/auth/logout").replace():n.data.message&&r[200===n.status?"success":"error"](n.data.message)),200===n.status?n:t.reject(n)}return e._request_count=0,{request:function(t){return t.url&&/\/api\//i.test(t.url)&&t.method&&(delete(t.data||t.params||{})._api_action,t.url=decodeURIComponent(t.url)),e._request_count++,t},requestError:function(e){return t.reject(e)},response:n,responseError:n}}])}]).service("$api",["$rootScope","$resource","$location","$state","APICONFIG",function(e,t,a,r,n){function o(e,t){return/(^http:\/\/)|(^https:\/\/)/.test(e)&&e||[localStorage.testapi&&"/testapi/"||"/api/",e,t&&"/:_api_action"||""].join("")}function s(e){return angular.isArray(this)&&{parameters:!angular.isFunction(arguments[0])&&arguments[0]||void 0,postData:!angular.isFunction(arguments[1])&&arguments[1]||void 0}||{parameters:!angular.isFunction(e.parameters)&&e.parameters||void 0,postData:!angular.isFunction(e.postData)&&e.postData||void 0}}function u(t){angular.forEach(e._api_request[t],function(e,t){e.request.$cancelRequest()}),delete e._api_request[t]}e._api_request={},e.$on("$stateChangeStart",function(e,t,a,r,n){t.name!==r.name&&u(r._URL)}),e.$on("$stateChangeSuccess",function(e,t,r,n,o){a.url()!==n._URL&&u(n._URL)}),angular.forEach(n,function(n,u){angular.isArray(n)&&n[0]&&(n[0]=o(n[0],!!n[2]),n[3]=angular.extend({},{cancellable:!0},n[3]),angular.forEach(n[2],function(e,t){angular.extend(e,{url:e.url&&o(e.url)||void 0,method:e.method||"POST",params:angular.extend(e.url&&{}||{_api_action:t},e.params)})}),angular.forEach(this[u]=t.apply(t,n),function(t,n,o,c){this[n]=function(){return(c=angular.isObject(arguments[0])&&arguments[0].cancellable)&&delete arguments[0].cancellable,o=t.apply(this,arguments),o.$cancelRequest&&(r.current._URL=a.url(),e._api_request[r.current._URL]=e._api_request[r.current._URL]||{},function(t,a){t&&(c||angular.equals(a,s.call({},t))?t.request.$resolved||(t.request.$cancelRequest(),!c&&console.warn("duplicate request:",localStorage.testapi&&"testapi"||"api","/",u,"/",n)):e._api_request[r.current._URL][u+"_"+n+"_"+Date.now()]=t)}(e._api_request[r.current._URL][u+"_"+n+"_recently"],s.apply([],arguments)),e._api_request[r.current._URL][u+"_"+n+"_recently"]=angular.extend({request:o},s.apply([],arguments))),o}},this[u]))},this)}]);
//# sourceMappingURL=app.api.min.js.map
