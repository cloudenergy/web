angular.module("app").component("floorModal",{templateUrl:"app/components/floormodal/modal.html?rev=825a38cb6a",bindings:{img:"<",floorid:"<",key:"<",identify:"<",name:"<"},controller:["$element","$api",function(t,a){var o=this,e=new Date;e.getFullYear().toString(),e.getMonth(),e.getMonth().toString(),e.getDay(),e.getDay().toString();o.arr=[],o.random=parseInt(1e3*Math.random(1e3)),o.$onInit=function(){t.find(".modal").on("show.bs.modal",function(t){a.business.channelstatistic({id:o.key},function(t){var a=t.result,e=(a.statistic.yesterday/(0==a.statistic.yesterday?1:a.statistic.yesterday)).toFixed(2),s=(a.statistic.currentmonth/(0==a.statistic.previousmonth?1:a.statistic.previousmonth)).toFixed(2),i="";switch(a.status){case 0:i="正常";break;case 1:i="数据异常!";break;case 2:i="通讯异常!";break;default:i="正常"}o.info={lasttotal:a.lasttotal,title:a.title,status:a.status,today:a.statistic.today,compareToYesterday:isNaN(e)?0:e,currentmonth:a.statistic.currentmonth,compareToPreviousmonth:isNaN(s)?0:s,statusStr:i}})}).on("hidden.bs.modal",function(t){})},t.tooltip("show")}]});