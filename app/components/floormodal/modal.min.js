angular.module("app").component("floorModal",{templateUrl:"app/components/floormodal/modal.html?rev=825a38cb6a",bindings:{img:"<",floorid:"<",key:"<",identify:"<",name:"<"},controller:["$element","$api",function(t,a){var o=this,e=new Date;e.getFullYear().toString(),e.getMonth()>=10?e.getMonth().toString():0+e.getMonth().toString(),e.getDay()>=10?e.getDay().toString():0+e.getDay().toString();o.arr=[],o.random=parseInt(1e3*Math.random(1e3)),o.$onInit=function(){t.find(".modal").on("show.bs.modal",function(t){a.business.channelstatistic({id:o.key},function(t){var a=t.result,e=(a.statistic.yesterday/(0==a.statistic.yesterday?1:a.statistic.yesterday)).toFixed(2),i=(a.statistic.currentmonth/(0==a.statistic.previousmonth?1:a.statistic.previousmonth)).toFixed(2),s=a.status,n="";switch(s){case 0:n="正常";break;case 1:n="数据异常!";break;case 2:n="通讯异常!";break;default:n="正常"}o.info={lasttotal:a.lasttotal,title:a.title,status:a.status,today:a.statistic.today,compareToYesterday:isNaN(e)?0:e,currentmonth:a.statistic.currentmonth,compareToPreviousmonth:isNaN(i)?0:i,statusStr:n}})}).on("hidden.bs.modal",function(t){})},t.tooltip("show")}]});