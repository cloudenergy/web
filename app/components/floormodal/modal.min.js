angular.module("app").component("floorModal",{templateUrl:"app/components/floormodal/modal.html?rev=825a38cb6a",bindings:{img:"<",floorid:"<",key:"<",identify:"<",name:"<"},controller:["$element","$api",function(t,o){var a=this,e=new Date;e.getFullYear().toString(),e.getMonth()>=10?e.getMonth().toString():0+e.getMonth().toString(),e.getDay()>=10?e.getDay().toString():0+e.getDay().toString();a.arr=[],a.random=parseInt(1e3*Math.random(1e3)),a.$onInit=function(){t.find(".modal").on("show.bs.modal",function(t){o.business.channelstatistic({id:a.key},function(t){console.log(t);var o=t.result,e=(o.statistic.yesterday/(0==o.statistic.yesterday?1:o.statistic.yesterday)).toFixed(2),s=(o.statistic.currentmonth/(0==o.statistic.previousmonth?1:o.statistic.previousmonth)).toFixed(2),i=o.status,n="";switch(i){case 0:n="正常";break;case 1:n="数据异常!";break;case 2:n="通讯异常!";break;default:n="正常"}a.info={lasttotal:o.lasttotal,title:o.title,status:o.status,today:o.statistic.today,compareToYesterday:isNaN(e)?0:e,currentmonth:o.statistic.currentmonth,compareToPreviousmonth:isNaN(s)?0:s,statusStr:n}})}).on("hidden.bs.modal",function(t){})},t.tooltip("show")}]});