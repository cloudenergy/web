"use strict";angular.module("app").directive("datetimepicker",["$ocLazyLoad",function($ocLazyLoad){var lazyLoad=$ocLazyLoad.load([{insertBefore:"#load_styles_before",files:["https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css"]},{files:["https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js"]}]);return{restrict:"EA",require:"?ngModel",link:function(scope,element,attrs,ctrl){lazyLoad.then(function(){var elmData,opt={maxDateTo:void 0,minDateTo:void 0,maxRangeTo:void 0,minRangeTo:void 0,rangeDay:void 0},options={locale:"zh-CN",format:"YYYY-MM-DD",maxDate:new Date,widgetPositioning:{horizontal:"right"}},linkage=function(t){opt.completed||(elmData=element.data("DateTimePicker"),opt.maxDateTo=opt.maxDateTo&&$(opt.maxDateTo).data("DateTimePicker"),opt.minDateTo=opt.minDateTo&&$(opt.minDateTo).data("DateTimePicker"),opt.maxRangeTo=opt.maxRangeTo&&$(opt.maxRangeTo).data("DateTimePicker"),opt.minRangeTo=opt.minRangeTo&&$(opt.minRangeTo).data("DateTimePicker"),opt.completed=!0),t=t||elmData.date(),opt.maxDateTo&&(opt.maxDateTo.minDate(t),opt.maxDateTo.date()&&elmData.maxDate(opt.maxDateTo.date())),opt.minDateTo&&(opt.minDateTo.maxDate(t),opt.minDateTo.date()&&elmData.minDate(opt.minDateTo.date())),opt.maxRangeTo&&opt.rangeDay&&opt.maxRangeTo.date(moment(Math.max(elmData.date(),Math.min(moment(t).add(opt.rangeDay,"days"),opt.maxRangeTo.date(),moment())))),opt.minRangeTo&&opt.rangeDay&&opt.minRangeTo.date(moment(Math.min(elmData.date(),Math.max(moment(t).subtract(opt.rangeDay,"days"),opt.minRangeTo.date()))))};angular.forEach(element.data(),function(val,key){/^\$/.test(key)||(/^\{.*\}$/.test(val)||/^\[.*\]$/.test(val)?eval("this[key]="+val):this[key]=val)},options),scope.$watch(attrs.datetimepicker,function(t){attrs.datetimepicker&&!angular.isDefined(t)||(angular.isObject(t)&&angular.extend(options,t),angular.forEach(opt,function(t,a){opt[a]=options[a],delete options[a]}),element.datetimepicker(options),!options.inline&&element.off("dp.change").on("dp.change",function(t){linkage(t.date),ctrl&&ctrl.$setViewValue(t.target.value)}).off("dp.show").on("dp.show",function(){linkage()}))})})}}}]);