"use strict";angular.module("app").component("login",{templateUrl:"app/modules/login/login.html?rev=ff1a3683e3",controller:["$scope","$cookies","$element","$timeout","$state","User","SweetAlert",function(e,o,l,r,a,t,s){var c=this,n=/cloudenergy\.me/.test(location.hostname)?/^(\w+)\./.exec(location.hostname)[1].toLowerCase():"www",m={www:{src:"app/modules/login/img/logo.png?rev=b0dcbb2509",title:"智慧云能源用户平台"},basic:{src:"app/modules/login/img/logo_basic.png?rev=f0343d6318",title:"柏诚智能云能源用户平台"},leo:{src:"app/modules/login/img/logo_leo.png?rev=8a0a271479",title:"雷优智能云能源用户平台"},intel:{src:"app/modules/login/img/logo_hongzhi.png?rev=2e3d7ad5a9",title:"鸿智途源云能源用户平台"}};c.logoSrc=m[n]&&m[n].src||m.www.src,c.logoTitle=m[n]&&m[n].title||m.www.title,c.user=localStorage.loginUser,c.passwd=localStorage.loginPasswd,c.remember=!!localStorage.loginRemember,c.rememberaccount=!!localStorage.rememberAccount,c.readonly=!0,r(function(){c.readonly=!1},500),l.find("input[type=checkbox]").radiocheck(),c.clearUserInput=function(){delete localStorage.loginUser,delete c.user,delete localStorage.loginPasswd,delete c.passwd,delete localStorage.loginRemember,delete c.remember,delete localStorage.rememberAccount,delete c.rememberaccount},c.clearPasswdInput=function(){delete localStorage.loginPasswd,delete c.passwd,delete localStorage.loginRemember,delete c.remember},e.$watch("$ctrl.rememberaccount",function(){!c.rememberaccount&&(c.remember=c.rememberaccount)}),e.$watch("$ctrl.remember",function(){c.remember&&(c.rememberaccount=c.remember)}),c.login=function(e){var o=c.remember,l=c.rememberaccount;e.$invalid?(!c.user&&e.user.$setDirty(),!c.passwd&&e.password.$setDirty()):(delete localStorage.loginUser,delete localStorage.loginPasswd,delete localStorage.loginRemember,delete localStorage.rememberAccount,localStorage.loginUser=c.user,o&&(localStorage.loginPasswd=c.passwd,localStorage.loginRemember=o,localStorage.rememberAccount=l,localStorage.loginUser=c.user),!o&&l&&(delete localStorage.loginPasswd,delete localStorage.loginRemember,localStorage.rememberAccount=l,localStorage.loginUser=c.user),t.$login({user:c.user,passwd:(new window.Hashes.MD5).hex(c.passwd).toUpperCase(),remember:o}).then(function(){a.go("dashboard.main",{},{location:"replace"})},function(e){e.message={20000001:"用户不存在",90000001:"服务器错误",90000002:"拒绝访问",90000003:"登录失败",90000004:"权限不足",90000005:"未登录",90000006:["验证失败","账号或密码有误"],90000007:"签名校验失败"}[e.code]||e.message,e.message&&s.error.apply(s,angular.isArray(e.message)?e.message:[e.message])}))}}]});