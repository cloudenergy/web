<div class="app-view-project-control text-center ng-cloak"><ul class="nav nav-tabs"><li><div class="btn-group"><a href="javascript:void(0)" class="btn btn-sm btn-primary" ng-class="{active:$ctrl.deviceType.selected.id===item.id}" ng-repeat="item in $ctrl.deviceType" ng-click="$ctrl.deviceType.select(item)" ng-bind="item.name"></a></div></li><li class="pull-right form-inline"><form class="input-group input-group-sm" ng-submit="$ctrl.list()"><input type="text" placeholder="请输入关键字" class="form-control" ng-model="$ctrl.searchKey"> <span class="input-group-btn"><button type="submit" class="btn"><span class="fui-search"></span></button></span></form></li></ul><div class="tab-content relative"><auto-height fix-height="25" class="tab-pane active col-xs-12 pl0 pr0 nowrap overflow-hidden" perfect-scrollbar="$ctrl.monitorData.length" perfect-scrollbar-event="{'ps-scroll-down':$ctrl.paging.flow}"><table class="table table-hover table-bordered" ng-if="$ctrl.deviceType.selected.id==='ENERGYMETER'"><tr><th class="text-center" style="width:36px"><checkbox checked="$ctrl.multiChecked.all" on-check="$ctrl.checkedAll()"></checkbox></th><th class="text-center" style="width:50px">序号</th><th style="width:15%">传感器</th><th style="width:100px">开关</th><th style="width:87px">供水温度</th><th style="width:87px">回水温度</th><th style="width:87px">温差</th><th>流量</th><th>流速</th><th>总冷量</th><th>总热量</th></tr><tr ng-repeat="item in $ctrl.monitorData"><td><checkbox checked="$ctrl.multiChecked[item.id]"></checkbox></td><td class="text-center" ng-bind="$index+1"></td><td ng-bind="item.title"></td><td ng-init="item.status.mode=item.status.mode==='EMC_COOLING'"><switch class="bootstrap-switch-square" state="item.status.mode" disabled="!item.command.EMC_MODE" on-switch="$ctrl.onSwitch(item,'EMC_MODE','mode','EMC_COOLING','EMC_HEATING')" data-on-text="制冷" data-off-text="制热" data-on-color="info" data-off-color="danger"></switch></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels['05'].lasttotal"></span> <span class="form-control-feedback"><i class="emweb web-degree"></i></span></div></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels['06'].lasttotal"></span> <span class="form-control-feedback"><i class="emweb web-degree"></i></span></div></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="(item.channels['05'].lasttotal>item.channels['06'].lasttotal?item.channels['05'].lasttotal-item.channels['06'].lasttotal:item.channels['06'].lasttotal-item.channels['05'].lasttotal).toFixed(2)"></span> <span class="form-control-feedback"><i class="emweb web-degree"></i></span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels['04'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels['09'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels['07'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td><td><div class="form-group form-group-sm has-feedback"><span class="form-control text-right" ng-bind="item.channels['08'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr></table><table class="table table-hover table-bordered" ng-if="$ctrl.deviceType.selected.id==='COLDWATERMETER'"><tr><th class="text-center" style="width:36px"><checkbox checked="$ctrl.multiChecked.all" on-check="$ctrl.checkedAll()"></checkbox></th><th class="text-center" style="width:50px">序号</th><th style="width:25%">传感器</th><th style="width:100px">开关</th><th style="text-align:left">刻度</th></tr><tr ng-repeat="item in $ctrl.monitorData"><td><checkbox checked="$ctrl.multiChecked[item.id]"></checkbox></td><td class="text-center" ng-bind="$index+1"></td><td ng-bind="item.title"></td><td ng-init="item.status.switch=item.status.switch==='EMC_ON'"><switch class="bootstrap-switch-square" state="item.status.switch" disabled="!item.command.EMC_SWITCH" on-switch="$ctrl.onSwitch(item,'EMC_SWITCH','switch','EMC_ON','EMC_OFF')" data-on-text="开" data-off-text="关" data-on-color="primary"></switch></td><td style="text-align:left"><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels['01'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr></table><table class="table table-hover table-bordered" ng-if="$ctrl.deviceType.selected.id==='HOTWATERMETER'"><tr><th class="text-center" style="width:36px"><checkbox checked="$ctrl.multiChecked.all" on-check="$ctrl.checkedAll()"></checkbox></th><th class="text-center" style="width:50px">序号</th><th style="width:25%">传感器</th><th style="width:100px">开关</th><th style="text-align:left">刻度</th></tr><tr ng-repeat="item in $ctrl.monitorData"><td><checkbox checked="$ctrl.multiChecked[item.id]"></checkbox></td><td class="text-center" ng-bind="$index+1"></td><td ng-bind="item.title"></td><td ng-init="item.status.switch=item.status.switch==='EMC_ON'"><switch class="bootstrap-switch-square" state="item.status.switch" disabled="!item.command.EMC_SWITCH" on-switch="$ctrl.onSwitch(item,'EMC_SWITCH','switch','EMC_ON','EMC_OFF')" data-on-text="开" data-off-text="关" data-on-color="primary"></switch></td><td style="text-align:left"><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels['03'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr></table><table class="table table-hover table-bordered" ng-if="$ctrl.deviceType.selected.id==='ELECTRICITYMETER'"><tr><th class="text-center" style="width:36px"><checkbox checked="$ctrl.multiChecked.all" on-check="$ctrl.checkedAll()"></checkbox></th><th class="text-center" style="width:50px">序号</th><th style="width:25%">传感器</th><th style="width:100px">开关</th><th style="text-align:left">功率</th></tr><tr ng-repeat="item in $ctrl.monitorData"><td><checkbox checked="$ctrl.multiChecked[item.id]"></checkbox></td><td class="text-center" ng-bind="$index+1"></td><td ng-bind="item.title"></td><td ng-init="item.status.switch=item.status.switch==='EMC_ON'"><switch class="bootstrap-switch-square" state="item.status.switch" disabled="!item.command.EMC_SWITCH" on-switch="$ctrl.onSwitch(item,'EMC_SWITCH','switch','EMC_ON','EMC_OFF')" data-on-text="开" data-off-text="关" data-on-color="primary"></switch></td><td style="text-align:left"><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.channels['11'].lasttotal"></span> <span class="form-control-feedback">KWh</span></div></td></tr></table><table class="table table-hover table-bordered" ng-if="$ctrl.deviceType.selected.id==='TEMPERATURECONTROL'"><tr><th class="text-center" style="width:36px"><checkbox checked="$ctrl.multiChecked.all" on-check="$ctrl.checkedAll()"></checkbox></th><th class="text-center" style="width:50px">序号</th><th style="width:15%">温控器名</th><th style="width:100px">面板开关</th><th style="width:100px">阀控开关</th><th>设置温度</th><th style="width:87px">室内温度</th><th>能量值(度)</th><th style="min-width:130px">风速</th><th style="min-width:300px">模式</th><th style="width:100px"></th></tr><tr ng-repeat="item in $ctrl.monitorData"><td><checkbox checked="$ctrl.multiChecked[item.id]"></checkbox></td><td class="text-center" ng-bind="$index+1"></td><td ng-bind="item.title"></td><td ng-init="item.status.switch=item.status.switch==='EMC_ON'"><switch class="bootstrap-switch-square" state="item.status.switch" disabled="!item.command.EMC_SWITCH" on-switch="$ctrl.onSwitch(item,'EMC_SWITCH','switch','EMC_ON','EMC_OFF')" data-on-text="开" data-off-text="关" data-on-color="primary"></switch></td><td ng-init="item.status.valve=item.status.valve==='EMC_ON'"><switch class="bootstrap-switch-square" state="item.status.valve" disabled="!item.command.EMC_VALVE" on-switch="$ctrl.onSwitch(item,'EMC_VALVE','valve','EMC_ON','EMC_OFF')" data-on-text="开" data-off-text="关" data-on-color="primary"></switch></td><td><div control-slider data-max="15" data-command="{{(item.command|filter:'EMC_TEMPERATURE').join()}}" data-sensorid="{{item.id}}" data-value="{{item.status.temperature||item.channels['37'].lasttotal}}"></div></td><td><div class="form-group form-group-sm has-feedback focus"><span class="form-control text-right" ng-bind="item.status.inroomtemperature||item.channels['40'].lasttotal"></span> <span class="form-control-feedback"><i class="emweb web-degree"></i></span></div></td><td><div class="input-group input-group-sm focus"><span class="input-group-addon"><i class="emweb web-charging"></i></span> <span class="form-control" ng-bind="item.channels['33'].lasttotal"></span></div></td><td><div control-speed data-command="{{(item.command|filter:'EMC_WINDSPEED').join()}}" data-sensorid="{{item.id}}" data-status="{{item.status.windspeed}}"></div></td><td><div class="btn-group" control-mode data-command="{{(item.command|filter:'EMC_MODE').join()}}" data-sensorid="{{item.id}}" data-status="{{item.status.mode}}"></div></td><td><a href="javascript:void(0)" class="btn btn-sm btn-info" ng-click="$ctrl.selectedItem=item">发送 <i class="glyphicon glyphicon-send"></i></a></td></tr></table></auto-height></div><customer class="relative" customer-selected="$ctrl.customerSelected"></customer><control-command selected="$ctrl.selectedItem"></control-command></div>